<html>
<head>
  <style>
    iframe,
    #chart {
      width: 100%;
      height: 100%;
      border: 0px;
    }

    #Logo {
      display: none;
      position: absolute;
      top: 15%;
      left: 15%;
      width: 70%;
      max-width: 100%;
      height: 70%;
      max-height: 100%;
    }

    #Message {
      display: none;
      color: #ffffff;
      text-align: center;
      font-family: Oswald, Open-Sans, Roboto, sans-serif;
      position: absolute;
      top: 50%;
      left: 50%;
      text-transform: uppercase;
      transform: translate(-50%, -50%);
      font-size: 2em;
    }

    pre.moves {
      position: absolute;
      top: 42%;
      right: 5%;
      font-size: 18px;
      white-space: pre-wrap;
      width: 50%;
    }

    pre.stats {
      position: absolute;
      top: 21%;
      left: 0;
      margin: 0;
    }

    .move {
      position: absolute;
      top: 28%;
      right: 71px;
      font-family: monospace;
      font-size: 28px;
    }

    pre.top {
      position: absolute;
      top: 0;
      font-size: 21px;
      left: 0%;
    }

    .TM pre {
      margin: 0;
    }

    .TM img {
      position: absolute;
      bottom: 4%;
      height: 60%;
    }

    .TM button {
      display: block;
      position: absolute;
      right: 10px;
      bottom: 14px;
      width: 21%;
      padding: 8px 0px;
      border: none;
      border-radius: 5px;
      color: #181a1b;
      cursor: pointer;
      background-color: #ffffff;
      font-size: 12px;
    }

    .TM {
      position: relative;
      float: left;
      width: 344px;
      height: 240px;
      color: #ffffff;
      margin-right: calc(50% - 344px);
      margin-bottom: calc(33.33% - 225px);
      top: calc(50% - 344px + 8px);
      left: calc(33.33% - 225px + 8px);
    }

    .TM.onePerRow {
      margin-right: calc(100% - 344px);
      margin-bottom: calc(66.66% - 225px);
      top: calc(100% - 344px + 8px);
      left: calc(66.66% - 225px + 8px);
    }

    #chart,
    body {
      background-color: #181a1b;
    }
  </style>
</head>

<body>
  <svg id="Logo" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <title>Logo</title>
    <path
      d="M523.753,1022.675l5.5-.962c1.828-.324,3.657-.6,5.453-1.088l5.4-1.258c.9-.218,1.8-.392,2.69-.644l2.652-.795,5.288-1.586c1.77-.484,3.465-1.235,5.2-1.838a176.94,176.94,0,0,0,38.794-19.913,196.112,196.112,0,0,0,32.86-28.169c4.909-5.289,9.646-10.726,14.056-16.427s8.563-11.6,12.476-17.639a283.106,283.106,0,0,0,34.615-78.824,314.992,314.992,0,0,0,8.374-42.385,330.412,330.412,0,0,0,.019-86.3,317.874,317.874,0,0,0-8.367-42.39,283.026,283.026,0,0,0-34.616-78.834c-3.916-6.044-8.044-11.957-12.474-17.644s-9.147-11.141-14.06-16.428a196.167,196.167,0,0,0-32.868-28.17q-4.563-3.105-9.323-5.924a77.068,77.068,0,0,1-149.249-37.237c-4.1-1.842-8.133-3.828-12.074-5.991a192.629,192.629,0,0,1-37.55-27.015l-4.233-3.972c-1.421-1.317-2.832-2.647-4.14-4.071l-4.012-4.2-2.008-2.1-1.906-2.188A228.927,228.927,0,0,1,355.683,430.6a261.71,261.71,0,0,1-23.834-39.821A286.737,286.737,0,0,1,314.99,347.54a316.715,316.715,0,0,1-9.918-45.31A345.55,345.55,0,0,1,301.728,256a346.969,346.969,0,0,1,3.326-46.234,319.091,319.091,0,0,1,9.911-45.314,287.442,287.442,0,0,1,16.857-43.242c3.41-6.953,7.041-13.8,11.023-20.447s8.252-13.117,12.813-19.379a227.919,227.919,0,0,1,14.567-18.093,219.964,219.964,0,0,1,16.3-16.533,192.724,192.724,0,0,1,37.559-27.016A164.681,164.681,0,0,1,479.919.993C212.1,17.551,0,240.005,0,512c0,282.77,229.23,512,512,512,.218,0,.436,0,.654,0l5.549-.653c1.855-.234,3.712-.34,5.55-.667"
      style="fill:#00aeef" />
    <path
      d="M1024,512C1024,229.259,794.817.047,512.087,0l-5.579.658c-1.855.233-3.712.34-5.55.667l-5.5.962c-1.827.324-3.657.6-5.453,1.087l-5.4,1.258c-.9.218-1.8.393-2.688.644l-2.653.8-5.288,1.585c-1.769.484-3.465,1.237-5.2,1.839a176.907,176.907,0,0,0-38.793,19.912,196.079,196.079,0,0,0-32.861,28.17C392.211,62.867,387.475,68.3,383.064,74s-8.562,11.6-12.475,17.64a283.093,283.093,0,0,0-34.615,78.824,314.791,314.791,0,0,0-8.374,42.384,330.419,330.419,0,0,0-.019,86.3,317.7,317.7,0,0,0,8.368,42.389,283,283,0,0,0,34.615,78.835c3.916,6.043,8.045,11.956,12.474,17.643s9.147,11.141,14.06,16.429a196.213,196.213,0,0,0,32.868,28.17q4.278,2.912,8.733,5.567a77.064,77.064,0,0,1,149.18,37.3c4.324,1.921,8.581,4,12.733,6.282a192.629,192.629,0,0,1,37.55,27.015l4.233,3.973c1.421,1.316,2.833,2.646,4.14,4.07l4.013,4.2,2.007,2.1,1.905,2.188A228.431,228.431,0,0,1,669.027,593.4a261.509,261.509,0,0,1,23.834,39.822,286.665,286.665,0,0,1,16.86,43.236,316.761,316.761,0,0,1,9.918,45.309,322.131,322.131,0,0,1,.018,92.466,319.122,319.122,0,0,1-9.911,45.314,287.426,287.426,0,0,1-16.856,43.241c-3.411,6.953-7.042,13.8-11.024,20.447s-8.252,13.118-12.812,19.379a227.751,227.751,0,0,1-14.568,18.093,219.776,219.776,0,0,1-16.3,16.533,192.747,192.747,0,0,1-37.558,27.016,164.8,164.8,0,0,1-55.221,18.667C812.605,1005.715,1024,783.546,1024,512"
      style="fill:#fff200" />
    <path
      d="M512.087,0h-.006C772.428.045,983.467,211.11,983.467,471.467c0,197.3-121.2,366.255-293.2,436.562-2.64,5.155-5.421,10.238-8.4,15.207q-5.98,9.962-12.812,19.379a227.751,227.751,0,0,1-14.568,18.093,219.776,219.776,0,0,1-16.3,16.533,192.747,192.747,0,0,1-37.558,27.016,164.8,164.8,0,0,1-55.221,18.667C812.605,1005.715,1024,783.546,1024,512,1024,229.259,794.817.047,512.087,0"
      style="fill:#e8d700" />
    <path
      d="M512,942.934c-260.384,0-471.467-211.083-471.467-471.467,0-249.163,193.289-453.155,438.1-470.277.429-.064.858-.136,1.287-.2C212.1,17.551,0,240.005,0,512c0,282.77,229.23,512,512,512,.218,0,.436,0,.654,0l5.549-.653c1.855-.234,3.712-.34,5.55-.667l5.5-.962c1.828-.324,3.657-.6,5.453-1.088l5.4-1.258c.9-.218,1.8-.392,2.69-.644l2.652-.795,5.288-1.586c1.77-.484,3.465-1.235,5.2-1.838a176.94,176.94,0,0,0,38.794-19.913,196.112,196.112,0,0,0,32.86-28.169c4.909-5.289,9.646-10.726,14.056-16.427s8.563-11.6,12.476-17.639q4.4-6.851,8.36-13.958A470.882,470.882,0,0,1,512,942.934"
      style="fill:#00a5d8" />
    <path
      d="M932.529,258.086v31.562h14.6q-6.735-16.1-14.6-31.562M802.685,278V230.072a13.325,13.325,0,1,1,13.325,0V278H802.685m29.161,0V230.072a13.325,13.325,0,1,1,13.325,0V278H831.846m29.161,0V230.072a13.325,13.325,0,1,1,13.325,0V278H861.007M762.053,122.031H732.774l20.489,15.51V236.1l-29,29H581.841l-36.832,24.555H890.168V260.062a13.325,13.325,0,1,1,13.324,0v29.586H919.2V233.69a473.068,473.068,0,0,0-56.836-77.7L762.053,205.91V122.031m19.987,0h-6.662v62.363l77.542-38.588c-1.608-1.682-3.236-3.361-4.868-5.02L782.04,173.638V122.031m46.47,0H795.365v30.091l42.658-21.229q-4.692-4.491-9.513-8.862"
      style="fill:#b5d939" />
    <path
      d="M874.178,150.111l-11.81,5.877a473.068,473.068,0,0,1,56.836,77.7V201.6q6.858,8.984,13.325,18.274v38.217q7.866,15.471,14.6,31.562h26.2a513.277,513.277,0,0,0-99.148-139.537M852.9,129.99q3,2.685,5.967,5.416l-10.811,5.38c1.632,1.659,3.26,3.338,4.868,5.02l11.142-5.545q-5.5-5.215-11.166-10.271m-.046-.041.022.02-.022-.02m-9.082-7.918H828.51q4.814,4.362,9.513,8.862l10.164-5.058q-2.2-1.914-4.419-3.8"
      style="fill:#aacb39" />
    <path
      d="M656.924,201.065l28.35-18.412a13.3,13.3,0,1,1,20.512,10.512,13.085,13.085,0,0,1-7.157,2.122,13.557,13.557,0,0,1-6.1-1.458l-28.351,18.412a13.3,13.3,0,1,1-20.512-10.513,13.086,13.086,0,0,1,7.157-2.123,13.55,13.55,0,0,1,6.1,1.46M710.7,122.031H699.661l33.616,25.449v80.337l-17.29,17.289H575.792l-58.176,38.783h0L510.225,272.8l61.532-41.021H710.468l9.484-9.484V154.1l-42.367-32.074H665.518v57.781l-64.5,43h-85.41l-9.484,9.484v48.75H492.8v-54.27l17.289-17.289h86.9l55.208-36.805V122.031h-6.662v47.084l-50.563,33.708H507.329l-21.191,21.191v65.634h48.173l-4.1-6.149,47.6-31.731h140.94l21.191-21.19V144.167L710.7,122.031"
      style="fill:#b5d939" />
    <path
      d="M333.748,165.081v8.094l1.375.526q.417-1.618.851-3.233.555-2.052,1.142-4.1l-3.368-1.288m20.023-43.05H333.748v28.784l7.328,2.8a287.607,287.607,0,0,1,12.695-31.586"
      style="fill:#b5dfb8" />
    <path
      d="M333.748,187.441v61.374h18.5L373.5,227.567a11.939,11.939,0,1,1,9.423,9.421L357.766,262.14H333.748v27.508h68.3V213.562l-68.3-26.121m3.368-21.072q-.585,2.044-1.142,4.1-.433,1.614-.851,3.233l80.25,30.69v85.257h7.56V199.189l-85.817-32.82M524.6,153.177a13.325,13.325,0,1,1,13.324-13.325A13.325,13.325,0,0,1,524.6,153.177m30.612-31.146H494.007l15.61,38.774H539.4l15.811-38.774m76.992,0H569.159l.382.156L548.359,174.13H500.618L479.65,122.05l.047-.019H395.488v27.963l66.618,25.477-.045,12.3v28.121a11.646,11.646,0,1,1-13.325-.346V187.77l.034-3.133-66.607-25.473V122.031H353.771a287.607,287.607,0,0,0-12.695,31.586l95.182,36.4v99.63h36.555V218.5l29-29h89.124l41.272-27.514V122.031"
      style="fill:#b5d939" />
    <path d="M486.138,289.648H472.813v1.333h13.325v-1.333m159.393-185.43H632.206v17.813h13.325V104.218"
      style="fill:#c8bd08" />
    <polyline
      points="645.531 122.031 632.206 122.031 632.206 161.984 590.934 189.498 501.81 189.498 472.813 218.495 472.813 289.648 486.138 289.648 486.138 224.014 507.329 202.823 594.968 202.823 645.531 169.115 645.531 122.031"
      style="fill:#90aa33" />
    <polyline points="665.518 90.893 652.193 90.893 652.193 122.031 665.518 122.031 665.518 90.893"
      style="fill:#c8bd08" />
    <polyline
      points="665.518 122.031 652.193 122.031 652.193 172.68 596.985 209.485 510.089 209.485 492.8 226.774 492.8 281.044 506.125 281.044 506.125 232.294 515.609 222.81 601.019 222.81 665.518 179.812 665.518 122.031"
      style="fill:#90aa33" />
    <polyline points="685.096 111.004 677.053 121.628 677.585 122.031 699.661 122.031 685.096 111.004"
      style="fill:#c8bd08" />
    <path
      d="M517.616,283.889h0M699.661,122.031H677.585L719.952,154.1V222.3l-9.484,9.484H571.757L510.225,272.8l7.392,11.087,58.175-38.783H715.987l17.29-17.289V147.48l-33.616-25.449"
      style="fill:#90aa33" />
    <path d="M545.009,289.648h-10.7l3.292,4.938,7.406-4.938M695.2,93.586l-8.043,10.624,23.54,17.821h22.077L695.2,93.586"
      style="fill:#c8bd08" />
    <polyline
      points="732.774 122.031 710.697 122.031 739.938 144.167 739.938 230.578 718.747 251.768 577.807 251.768 530.212 283.499 534.311 289.648 545.009 289.648 581.841 265.093 724.266 265.093 753.263 236.097 753.263 137.541 732.774 122.031"
      style="fill:#90aa33" />
    <path d="M324.813,261.835v.305h0l0-.305m.033-13.02h-.033v1.66q.014-.829.033-1.66" style="fill:#c8c7c7" />
    <path d="M333.748,248.815h-8.9q-.019.829-.033,1.66v11.36l0,.305h8.93V248.815" style="fill:#c8bd08" />
    <path
      d="M385.123,213.508A11.777,11.777,0,0,0,373.5,227.567l-21.249,21.248h-18.5V262.14h24.018l25.152-25.152a11.844,11.844,0,1,0,2.2-23.48"
      style="fill:#90aa33" />
    <path d="M329.476,171.541l-4.759,12.446,7.318,2.8q.811-3.786,1.713-7.552v-6.059l-4.272-1.634"
      style="fill:#c8c7c7" />
    <path d="M415.373,289.648H402.048v.772h13.325v-.772M333.748,179.234q-.9,3.766-1.713,7.552l1.713.655v-8.207"
      style="fill:#c8bd08" />
    <path d="M333.748,173.175v6.059q.664-2.774,1.375-5.533l-1.375-.526" style="fill:#91af92" />
    <path d="M335.123,173.7q-.711,2.76-1.375,5.533v8.207l68.3,26.121v76.086h13.325V204.391l-80.25-30.69"
      style="fill:#90aa33" />
    <polyline points="323.653 146.954 318.893 159.4 333.748 165.081 333.748 150.815 323.653 146.954"
      style="fill:#c8c7c7" />
    <polyline points="436.258 289.648 422.933 289.648 422.933 304.643 436.258 304.643 436.258 289.648"
      style="fill:#c8bd08" />
    <path d="M333.748,150.815v14.266l3.368,1.288q1.838-6.418,3.96-12.752l-7.328-2.8" style="fill:#91af92" />
    <path d="M341.076,153.617q-2.123,6.332-3.96,12.752l85.817,32.82v90.459h13.325v-99.63l-95.182-36.4"
      style="fill:#90aa33" />
    <polyline points="395.488 87.358 382.163 87.358 382.163 122.031 395.488 122.031 395.488 87.358"
      style="fill:#c8bd08" />
    <path
      d="M395.488,122.031H382.163v37.133l66.607,25.473-.034,3.133v27.775a11.694,11.694,0,1,0,13.325.346V187.77l.045-12.3-66.618-25.477V122.031"
      style="fill:#90aa33" />
    <path d="M524.6,126.527a13.325,13.325,0,1,0,13.324,13.325A13.325,13.325,0,0,0,524.6,126.527" style="fill:#90aa33" />
    <path d="M557.2,117.155l-1.989,4.876h13.945L557.2,117.155m-65.192-.082L479.7,122.031h14.31l-2-4.958"
      style="fill:#c8bd08" />
    <polyline
      points="569.159 122.031 555.214 122.031 539.403 160.805 509.617 160.805 494.007 122.031 479.697 122.031 479.65 122.05 500.618 174.13 548.359 174.13 569.541 122.187 569.159 122.031"
      style="fill:#90aa33" />
    <path
      d="M698.516,168.663a13.258,13.258,0,0,0-13.242,13.99l-28.35,18.412a13.55,13.55,0,0,0-6.1-1.46,13.086,13.086,0,0,0-7.157,2.123,13.325,13.325,0,1,0,20.512,10.513l28.351-18.412a13.557,13.557,0,0,0,6.1,1.458,13.085,13.085,0,0,0,7.157-2.122,13.326,13.326,0,0,0-7.27-24.5"
      style="fill:#90aa33" />
    <path d="M809.347,205.271a13.284,13.284,0,0,0-6.662,24.8V278H816.01V230.072a13.285,13.285,0,0,0-6.663-24.8"
      style="fill:#90aa33" />
    <path d="M838.508,205.271a13.284,13.284,0,0,0-6.662,24.8V278h13.325V230.072a13.285,13.285,0,0,0-6.663-24.8"
      style="fill:#90aa33" />
    <path d="M867.669,205.271a13.284,13.284,0,0,0-6.662,24.8V278h13.325V230.072a13.285,13.285,0,0,0-6.663-24.8"
      style="fill:#90aa33" />
    <polyline points="903.492 289.648 890.168 289.648 890.168 305.738 903.492 299.352 903.492 289.648"
      style="fill:#c8bd08" />
    <path d="M896.83,235.26a13.285,13.285,0,0,0-6.662,24.8v29.586h13.324V260.062a13.285,13.285,0,0,0-6.662-24.8"
      style="fill:#90aa33" />
    <polyline points="775.378 103.515 762.053 103.515 762.053 122.031 775.378 122.031 775.378 103.515"
      style="fill:#c8bd08" />
    <path d="M864.062,140.261h0q5.128,4.859,10.116,9.85l0,0q-4.99-5-10.121-9.847" style="fill:#b7a908" />
    <path
      d="M775.378,122.031H762.053V205.91l100.315-49.922c-3.106-3.447-6.243-6.828-9.448-10.182l-77.542,38.588V122.031"
      style="fill:#90aa33" />
    <path d="M864.062,140.261l-11.142,5.545c3.205,3.354,6.342,6.735,9.448,10.182l11.81-5.877q-4.993-5-10.116-9.85"
      style="fill:#88a033" />
    <polyline points="795.365 116.839 782.04 116.839 782.04 122.031 795.365 122.031 795.365 116.839"
      style="fill:#c8bd08" />
    <path d="M852.872,129.969l.024.021-.024-.021m-4.685-4.134h0q2.34,2.041,4.663,4.114-2.319-2.07-4.663-4.114"
      style="fill:#b7a908" />
    <path d="M795.365,122.031H782.04v51.607l66.012-32.852q-4.943-5.022-10.029-9.893l-42.658,21.229V122.031"
      style="fill:#90aa33" />
    <path
      d="M848.187,125.835l-10.164,5.058q5.091,4.875,10.029,9.893l10.811-5.38q-2.963-2.73-5.967-5.416l-.024-.021-.022-.02q-2.316-2.067-4.664-4.113"
      style="fill:#88a033" />
    <polyline points="932.529 289.648 919.204 289.648 919.204 297.245 932.529 297.245 932.529 289.648"
      style="fill:#c8bd08" />
    <path d="M919.2,233.69v55.958h13.325V258.086q-6.309-12.408-13.325-24.4" style="fill:#90aa33" />
    <path d="M919.2,201.6v32.1q7.007,11.973,13.325,24.4V219.869q-6.463-9.29-13.325-18.274" style="fill:#88a033" />
    <polyline
      points="173.059 185.968 179.208 238.123 127.409 229.472 175.652 250.224 142.26 290.757 184.353 259.353 202.759 308.539 196.609 256.383 248.409 265.035 200.166 244.283 233.558 203.75 191.465 235.154 173.059 185.968"
      style="fill:#b3e7fa" />
    <path
      d="M336.62,272.582a21.334,21.334,0,0,0,0,42.667H980.886a21.493,21.493,0,0,0,3.788-.355q-9.05-21.678-19.989-42.312Z"
      style="fill:#231f20" />
    <path
      d="M335.645,100.978a21.333,21.333,0,0,0,21.333,21.333H844.1a513.728,513.728,0,0,0-57.742-42.666H356.978A21.333,21.333,0,0,0,335.645,100.978Z"
      style="fill:#231f20" />
    <path
      d="M690.252,734.352h-68.3v76.086l68.3,26.122V775.184h-18.5l-21.248,21.25a11.94,11.94,0,1,1-9.424-9.422l25.151-25.152h24.019V734.352"
      style="fill:#36b7b0" />
    <path d="M689.524,850.547q-.387,1.494-.787,2.985-.589,2.176-1.212,4.344l2.727,1.043v-8.093l-.728-.279"
      style="fill:#b5dfb8" />
    <path d="M608.627,734.352h-7.56v90.459l86.458,33.065q.623-2.167,1.212-4.344.4-1.491.787-2.985l-80.9-30.939V734.352"
      style="fill:#36b7b0" />
    <path d="M683.554,870.624A287.475,287.475,0,0,1,670.94,901.97h19.312V873.185l-6.7-2.561" style="fill:#b5dfb8" />
    <path
      d="M331.468,830.172,359.82,811.76a13.3,13.3,0,1,1,20.511,10.512,13.078,13.078,0,0,1-7.157,2.123,13.542,13.542,0,0,1-6.1-1.459l-28.352,18.411a13.3,13.3,0,1,1-20.511-10.512,13.086,13.086,0,0,1,7.157-2.123,13.546,13.546,0,0,1,6.1,1.46m206.394-95.82H489.688l4.1,6.15-47.6,31.73H305.253l-21.191,21.191v86.41L303.1,894.242q8.1,4.011,16.4,7.728h4.845l-33.615-25.45V796.183l17.288-17.289h140.2l58.175-38.783h0l7.391,11.087-61.531,41.021H313.532l-9.483,9.483V869.9l42.366,32.074h12.067V844.188l64.5-43h85.41l9.484-9.483v-48.75H531.2v54.27l-17.29,17.288H427.015L371.807,851.32v50.65h6.663V854.884l50.561-33.707h87.64l21.191-21.191V734.352m49.88,0H551.187v71.154l-29,29H433.066L391.8,862.016V901.97h63.047l-.383-.157,21.181-51.942h47.742l20.967,52.079h0l-.048.02h84.212V874.006l-66.62-25.477.045-12.3V808.108a11.645,11.645,0,1,1,13.326.347v27.776l-.035,3.132,66.608,25.472V901.97h29.1a287.475,287.475,0,0,0,12.614-31.346l-95.812-36.643V734.352"
      style="fill:#36b7b0" />
    <path d="M303.1,894.242,313.3,901.97h6.19q-8.276-3.707-16.4-7.728" style="fill:#36b3a4" />
    <path
      d="M248.622,839.605l-18.993,9.452q2.994,2.243,6.029,4.442l6.3-3.137v7.625c2.2,1.541,4.432,3.074,6.662,4.578v-22.96M214.653,818.73a13.285,13.285,0,0,1-6.662-24.8V746h13.324v47.931a13.285,13.285,0,0,1-6.662,24.8m264.338-84.378H133.833v18.713q7.648,10.257,15.835,20.077V746h13.325V788.45c3.448,3.794,6.935,7.509,10.5,11.188a13.484,13.484,0,0,1,5.334-5.71V746h13.324v47.931a13.274,13.274,0,0,1-.615,23.353Q204.292,829.1,217.922,840l44.025-21.909v53.144q4.365,2.736,8.79,5.377V787.9l29-29H442.159l36.832-24.555"
      style="fill:#36b7b0" />
    <path
      d="M228.635,871.878l-52.822,26.287q2.2,1.916,4.418,3.805h48.4V871.878m33.312-.644V901.97h29.28l-20.49-15.512v-9.847q-4.427-2.643-8.79-5.377M241.96,857.987V901.97h6.662v-39.4c-2.23-1.5-4.459-3.037-6.662-4.578m-12.331-8.93-69.692,34.681q-.683-.647-1.364-1.3,6.549,6.249,13.323,12.274-3.406-3.031-6.759-6.121l70.521-35.1q-3.03-2.2-6.029-4.442M120.507,734.352H104.8V822.4q-6.858-8.982-13.325-18.272v-69.78h-40.8a513.3,513.3,0,0,0,99.147,139.537l68.1-33.89q-13.6-10.868-26.383-22.718A13.328,13.328,0,0,1,172.167,805.4a13.093,13.093,0,0,1,1.329-5.766c-3.568-3.679-7.055-7.394-10.5-11.188v5.478a13.325,13.325,0,1,1-13.325,0V773.142q-8.181-9.818-15.835-20.077v10.874a13.325,13.325,0,1,1-13.326,0V734.352"
      style="fill:#36b3a4" />
    <path
      d="M499.4,897.473a13.325,13.325,0,1,1,13.325-13.325A13.325,13.325,0,0,1,499.4,897.473M514.382,863.2H484.6L468.786,901.97h61.207L514.382,863.2"
      style="fill:#36b7b0" />
    <path d="M391.8,901.97H378.47v17.812H391.8V901.97M551.187,733.019H537.862v1.333h13.325v-1.333"
      style="fill:#098abb" />
    <polyline
      points="551.187 734.352 537.862 734.352 537.862 799.986 516.671 821.177 429.031 821.177 378.47 854.884 378.47 901.97 391.795 901.97 391.795 862.016 433.066 834.502 522.19 834.502 551.187 805.506 551.187 734.352"
      style="fill:#31918c" />
    <path d="M371.807,901.97H358.482v15.4q6.616,2.279,13.325,4.365V901.97" style="fill:#098abb" />
    <path d="M358.482,917.375v15.732h13.325V921.74q-6.7-2.086-13.325-4.365" style="fill:#0983aa" />
    <polyline
      points="531.2 742.956 517.875 742.956 517.875 791.706 508.391 801.189 422.981 801.189 358.482 844.188 358.482 901.97 371.807 901.97 371.807 851.32 427.015 814.514 513.91 814.514 531.2 797.226 531.2 742.956"
      style="fill:#31918c" />
    <path d="M346.415,901.97H324.339l6.445,4.879c3.231,1.346,6.518,2.673,9.785,3.949l6.378-8.425-.532-.4"
      style="fill:#098abb" />
    <path d="M330.784,906.849,338.9,913l1.665-2.2c-3.267-1.276-6.554-2.6-9.785-3.949" style="fill:#0983aa" />
    <polyline
      points="506.383 740.111 448.208 778.894 308.012 778.894 290.724 796.183 290.724 876.52 324.339 901.97 346.415 901.97 304.049 869.896 304.049 801.702 313.532 792.219 452.243 792.219 513.774 751.198 506.383 740.111 506.383 740.111"
      style="fill:#31918c" />
    <polyline points="486.397 729.414 478.991 734.352 489.688 734.352 486.397 729.415 486.397 729.414"
      style="fill:#098abb" />
    <polyline points="313.304 901.97 291.227 901.97 328.799 930.414 336.842 919.79 313.304 901.97"
      style="fill:#0983aa" />
    <path
      d="M489.688,734.352h-10.7l-36.832,24.555H299.734l-29,29v88.708q15.8,9.431,32.359,17.631l-19.034-14.409v-86.41l21.191-21.191h140.94l47.6-31.73-4.1-6.15"
      style="fill:#31918c" />
    <path d="M270.737,876.611v9.847l20.49,15.512H313.3L303.1,894.242q-16.567-8.2-32.359-17.631" style="fill:#318e83" />
    <polyline points="699.188 761.86 690.252 761.86 690.252 775.184 699.188 775.184 699.188 761.86"
      style="fill:#098abb" />
    <path d="M690.252,761.86H666.233l-25.151,25.152a11.937,11.937,0,1,0,9.424,9.422l21.248-21.25h18.5V761.86"
      style="fill:#31918c" />
    <path d="M621.952,733.58H608.627v.772h13.325v-.772" style="fill:#098abb" />
    <path d="M692.622,837.466q-1.1,5.124-2.37,10.211v3.149l4.271,1.633,4.76-12.446h0l-6.661-2.547"
      style="fill:#c8c7c7" />
    <path d="M690.252,836.56v11.117q1.266-5.087,2.37-10.211l-2.37-.906" style="fill:#098abb" />
    <path d="M690.252,847.677q-.357,1.435-.728,2.87l.728.279v-3.149" style="fill:#91af92" />
    <path d="M621.952,734.352H608.627v85.256l80.9,30.939q.37-1.433.728-2.87V836.56l-68.3-26.122V734.352"
      style="fill:#31918c" />
    <polyline points="601.067 719.357 587.742 719.357 587.742 734.352 601.067 734.352 601.067 719.357"
      style="fill:#098abb" />
    <polyline points="690.252 858.919 690.252 873.185 700.348 877.046 705.107 864.6 690.252 858.919"
      style="fill:#c8c7c7" />
    <path d="M687.525,857.876q-1.843,6.417-3.971,12.748l6.7,2.561V858.919l-2.727-1.043" style="fill:#91af92" />
    <path d="M601.067,734.352H587.742v99.629l95.812,36.643q2.128-6.329,3.971-12.748l-86.458-33.065V734.352"
      style="fill:#31918c" />
    <path d="M641.837,901.97H628.513v26.449q6.7-1.7,13.324-3.6V901.97" style="fill:#098abb" />
    <path d="M641.837,924.82q-6.622,1.894-13.324,3.6v8.224h13.324V924.82" style="fill:#0983aa" />
    <path
      d="M568.826,787.063a11.64,11.64,0,0,0-6.888,21.045v28.121l-.045,12.3,66.62,25.477V901.97h13.324V864.835l-66.608-25.472.035-3.132V808.455a11.663,11.663,0,0,0-6.438-21.392"
      style="fill:#31918c" />
    <path d="M499.4,870.823a13.325,13.325,0,1,0,13.325,13.325A13.325,13.325,0,0,0,499.4,870.823" style="fill:#31918c" />
    <path d="M468.786,901.97H454.842l11.956,4.875,1.988-4.875m75.515,0H529.993l2,4.957L544.3,901.97"
      style="fill:#098abb" />
    <polyline
      points="523.382 849.871 475.64 849.871 454.459 901.813 454.842 901.97 468.786 901.97 484.597 863.196 514.382 863.196 529.993 901.97 544.301 901.97 544.349 901.95 544.349 901.95 523.382 849.871"
      style="fill:#31918c" />
    <path
      d="M373.061,797.77a13.257,13.257,0,0,0-13.241,13.99l-28.352,18.412a13.546,13.546,0,0,0-6.1-1.46,13.086,13.086,0,0,0-7.157,2.123,13.325,13.325,0,1,0,20.511,10.512l28.352-18.411a13.542,13.542,0,0,0,6.1,1.459,13.078,13.078,0,0,0,7.157-2.123,13.326,13.326,0,0,0-7.27-24.5"
      style="fill:#31918c" />
    <path d="M221.315,746H207.991v47.931a13.325,13.325,0,1,0,13.324,0V746" style="fill:#31918c" />
    <path
      d="M192.154,746H178.83v47.931a13.484,13.484,0,0,0-5.334,5.71q8.782,9.057,18.043,17.643a13.274,13.274,0,0,0,.615-23.353V746"
      style="fill:#31918c" />
    <path
      d="M173.5,799.638a13.093,13.093,0,0,0-1.329,5.766,13.328,13.328,0,0,0,19.372,11.877q-9.252-8.577-18.043-17.643"
      style="fill:#318e83" />
    <path d="M162.993,746H149.668v27.145q6.5,7.8,13.325,15.308V746" style="fill:#31918c" />
    <path d="M149.668,773.142v20.786a13.326,13.326,0,1,0,13.325,0V788.45q-6.82-7.507-13.325-15.308"
      style="fill:#318e83" />
    <path d="M133.833,718.262l-13.326,6.386v9.612l.062.092h13.264v-16.09" style="fill:#098abb" />
    <path d="M120.507,734.26v.092h.062l-.062-.092" style="fill:#0983aa" />
    <path d="M133.833,734.352H120.569c4.267,6.339,8.7,12.6,13.264,18.713V734.352" style="fill:#31918c" />
    <path d="M120.569,734.352h-.062v29.587a13.325,13.325,0,1,0,13.326,0V753.065c-4.562-6.116-9-12.374-13.264-18.713"
      style="fill:#318e83" />
    <path
      d="M261.947,901.97H248.622v18.515h13.325V901.97M149.821,873.889l0,0q4.326,4.329,8.757,8.55-4.429-4.227-8.752-8.553"
      style="fill:#0983aa" />
    <path d="M261.947,818.09,217.922,840q5.789,4.626,11.707,9.058l18.993-9.452v22.96q6.579,4.44,13.325,8.669V818.09"
      style="fill:#31918c" />
    <path
      d="M248.622,862.565v39.4h13.325V871.234q-6.733-4.221-13.325-8.669M217.922,840l-68.1,33.89q4.327,4.33,8.752,8.553.681.649,1.364,1.3l69.692-34.681Q223.7,844.611,217.922,840"
      style="fill:#318e83" />
    <path
      d="M241.96,901.97H228.635v5.191H241.96V901.97M171.9,894.716q1.948,1.734,3.917,3.449h0q-1.968-1.716-3.917-3.449"
      style="fill:#0983aa" />
    <path d="M241.96,850.362l-6.3,3.137c2.092,1.516,4.184,3.006,6.3,4.488v-7.625" style="fill:#31918c" />
    <path
      d="M235.658,853.5l-70.521,35.1q3.353,3.088,6.759,6.121,1.95,1.734,3.918,3.449l52.821-26.287V901.97H241.96V857.987c-2.118-1.482-4.21-2.972-6.3-4.488"
      style="fill:#318e83" />
    <polyline points="104.796 726.756 91.471 726.756 91.471 734.352 104.796 734.352 104.796 726.756"
      style="fill:#0983aa" />
    <path d="M104.8,734.352H91.471v69.78q6.465,9.287,13.325,18.272V734.352" style="fill:#318e83" />
    <path
      d="M687.38,751.418a21.334,21.334,0,0,0,0-42.667H43.114a21.493,21.493,0,0,0-3.788.355q9.05,21.678,19.99,42.312Z"
      style="fill:#231f20" />
    <path
      d="M688.355,923.022a21.334,21.334,0,0,0-21.333-21.334H179.9a513.5,513.5,0,0,0,57.74,42.667H667.022A21.333,21.333,0,0,0,688.355,923.022Z"
      style="fill:#231f20" />
    <path
      d="M609.391,1007.121l5.307-2.854q5.16-3.072,10.3-6.278c3.31-2.262,6.65-4.537,9.872-6.951l4.762-3.715c1.58-1.251,3.211-2.461,4.7-3.8a225.713,225.713,0,0,0,33.4-34.937c19.806-25.539,34.51-54.834,44.219-85.538a320.391,320.391,0,0,0-.05-190.075c-9.709-30.7-24.43-59.979-44.227-85.513a225.774,225.774,0,0,0-33.4-34.925c-1.492-1.344-3.122-2.553-4.7-3.8l-4.759-3.716c-3.215-2.421-6.565-4.682-9.871-6.948q-5.126-3.209-10.29-6.279l-5.3-2.856c-1.78-.925-3.484-1.952-5.34-2.741-28.785-13.949-61.434-19.669-91.4-14.188A187.223,187.223,0,0,1,554.9,525.053a180.789,180.789,0,0,1,36.444,21.911c22.266,17.126,40.071,38.915,54.156,62.606a290.533,290.533,0,0,1,31.08,76.38,340.545,340.545,0,0,1-.049,164.086,290.714,290.714,0,0,1-31.089,76.353c-14.084,23.682-31.879,45.464-54.13,62.594a180.741,180.741,0,0,1-36.422,21.927A187.58,187.58,0,0,1,512.64,1024a516.6,516.6,0,0,0,65.918-4.29,166.969,166.969,0,0,0,25.492-9.84C605.909,1009.079,607.605,1008.039,609.391,1007.121Z"
      style="fill:#231f20" />
    <path
      d="M415.321,16.879l-5.308,2.855q-5.158,3.072-10.3,6.276c-3.31,2.263-6.649,4.538-9.872,6.951l-4.761,3.716c-1.581,1.251-3.212,2.461-4.705,3.8a225.719,225.719,0,0,0-33.4,34.937c-19.806,25.539-34.51,54.834-44.219,85.539a320.391,320.391,0,0,0,.05,190.075c9.709,30.7,24.431,59.978,44.228,85.512a225.721,225.721,0,0,0,33.4,34.925c1.492,1.343,3.122,2.553,4.7,3.8l4.759,3.717c3.215,2.42,6.565,4.681,9.871,6.946q5.125,3.212,10.29,6.28l5.3,2.857c1.78.924,3.484,1.952,5.341,2.741,28.784,13.948,61.433,19.668,91.4,14.187a187.137,187.137,0,0,1-42.277-13.053,180.789,180.789,0,0,1-36.444-21.911c-22.266-17.126-40.071-38.915-54.156-62.607a290.5,290.5,0,0,1-31.08-76.379,340.545,340.545,0,0,1,.049-164.086,290.682,290.682,0,0,1,31.09-76.353c14.083-23.683,31.879-45.464,54.129-62.594a180.8,180.8,0,0,1,36.423-21.928A187.593,187.593,0,0,1,512.089,0H512a516.827,516.827,0,0,0-65.269,4.122,166.894,166.894,0,0,0-26.07,10.012C418.8,14.921,417.106,15.961,415.321,16.879Z"
      style="fill:#231f20" />
    <circle cx="512" cy="512" r="89.825" transform="translate(-212.077 512) rotate(-45)" style="fill:#fff" />
    <path
      d="M512,440.889A71.111,71.111,0,1,1,440.889,512,71.112,71.112,0,0,1,512,440.889m0-37.427a108.538,108.538,0,1,0,76.748,31.79A107.827,107.827,0,0,0,512,403.462Z"
      style="fill:#231f20" />
  </svg>
  <div id="Message">Checking if Future Sight AI is running...</div>
</body>
<script>
  const FRAME_TYPE = 'BATTLE';
  const noBattleEle = FRAME_TYPE === 'BATTLE' ? '#Message' : '#Logo';
  document.getElementById(noBattleEle.substr(1)).style.display = 'block';
</script>
<script src="https://cdn.jsdelivr.net/npm/@aspnet/signalr@1.1.0/dist/browser/signalr.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  const API_URL = 'https://fsailiveupdate.azurewebsites.net/api/';
  const SHOWDOWN_PAGE_HOST = 'https://cdn.jsdelivr.net';
  const SHOWDOWN_PAGE_URL = SHOWDOWN_PAGE_HOST + '/gh/aed3/FSAI-Extras/liveStream/PSMini.html';
  const pageID = location.host.substr(0, 9);
  let hadBattle = false;
  let finding = false;

  const currentBattle = {
    id: 0,
    yourTeam: {},
  };

  const colorSet = [
    "#F56125",
    "#73BB56",
    "#3FA09C",
    "#F28942",
    "#EBB831",
    "#EBB831",
    "#242D60",
    "#163328",
    "#FBB574",
    "#EE7757",
    "#E5BA3A",
    "#F2990B",
    "#03557B",
    "#782970"
  ];

  CanvasJS.addColorSet('myColors', colorSet);

  const body = $('body');
  const showBattleFrame = () => {
    const frame = $('<iframe></iframe>');
    currentBattle.frame = frame;

    window.addEventListener('message', message => {
      if (message.origin === SHOWDOWN_PAGE_HOST && message.data === 'ready') {
        frames[0].postMessage(currentBattle.id.replace(/_/g, '-'));
      }
    }, {once: true});

    frame.attr('src', SHOWDOWN_PAGE_URL);
    body.append(frame);
  };

  const showTempChart = () => {
    const chartHolder = $('<div id="chart"></div>');
    body.append(chartHolder);
  };

  const titleFontColor = '#CD0B11';
  const blackish = '#181A1B';
  const defaultChartSettings = {
    theme: 'light2',
    colorSet: "myColors",
    exportEnabled: true,
    animationsEnabled: true,
    axisY: {
      labelFontColor: blackish,
      lineColor: blackish,
      gridColor: blackish,
    },
    axisX: {
      labelFontColor: blackish,
      lineColor: blackish,
      gridColor: blackish,
      margin: 20,
    },
  };

  const updateWinChart = (data) => {
    const chartOpts = {
      ...defaultChartSettings,
      title: {
        text: 'FSAI\'s Win Chance by Turn',
        fontWeight: 'normal',
        fontColor: titleFontColor,
      },
      data: [{
        type: 'line',
        markerSize: 15,
        lineColor: titleFontColor,
        markerColor: titleFontColor,
        toolTipContent: `<strong>{x}</strong>: {y}%`,
        dataPoints: data.winChances,
      }],
    };

    chartOpts.axisY.suffix = '%';
    chartOpts.axisX.interval = 1;
    const chart = new CanvasJS.Chart('chart', chartOpts);

    chart.render();
  };

  const predictionChartOpts = {
    ...defaultChartSettings,
    title: {
      text: 'Last Turn\s Move Predictions',
      fontWeight: 'normal',
      fontColor: titleFontColor,
    },
    subtitles: [],
    data: [{
      type: 'doughnut',
      innerRadius: 50,
      indexLabel: '{name} - {y}%',
      indexLabelFontSize: 15,
      indexLabelFontColor: blackish,
      dataPoints: [],
    }],
  };

  if (FRAME_TYPE === 'WORST_CASE') {
    predictionChartOpts.title.text = 'Last Turn\s Worst Case Scenarios';
    predictionChartOpts.subtitles = [
      {text: 'If the opponent went for these moves,\nthis is how much the AI thought its win chance would change by'},
    ];

    predictionChartOpts.data[0].type = 'bar';
    predictionChartOpts.data[0].indexLabel = '{y}%';
    delete predictionChartOpts.data[0].indexLabelFontSize;
  }

  const updatePredictionChart = (data) => {
    if (FRAME_TYPE === 'YOUR_MOVES') {
      predictionChartOpts.data[0].dataPoints =
        data.yourActionAnalysis.map(action => ({
          name: action.name,
          y: action.predictedChance,
        }));

      predictionChartOpts.subtitles = [
        {text: `${data.moveChance}% Chance to Move`},
        {text: `${data.switchChance}% Chance to Switch`},
      ].map(subtitle => {
        subtitle.fontColor = blackish;
        return subtitle;
      });
    }
    else {
      predictionChartOpts.data[0].dataPoints =
        data.yourActionAnalysis.map(action => ({
          name: action.name,
          y: action.winChanceEffect,
          label: action.name,
        })).sort((a, b) => b.y - a.y);
    }

    const chart = new CanvasJS.Chart('chart', predictionChartOpts);

    chart.render();
  };

  const updateTeam = (data = {}) => {
    Object.assign(currentBattle.yourTeam, data.updatedSets);
    $('.TM').remove();
    Object.entries(currentBattle.yourTeam).forEach(([index, set]) => {
      const setText = $(`<div class="TM"></div>`);
      setText.append(`<img src="http://pokepast.es/img/pokemon/${index}-0.png"/>`);
      setText.append(`<div class="move">Moves</div>`);

      Object.entries(set).forEach(([name, text]) => {
        const setPart = $(`<pre class="${name}"><code>${text.trim()}</code></pre>`);
        setText.append(setPart);
      });

      setText.append($(`<button class="copy-button" onclick="copySet(event)">Copy</button>`));
      body.append(setText);
    });
  };

  const copySet = (event) => {
    const textHolders = $(event.currentTarget).parent().find('code');
    navigator.clipboard.writeText(textHolders.toArray().map(c => c.innerText).join('\n'));
  };

  const show = () => {
    $(noBattleEle).hide();
    $('#chart, iframe, .TM').remove();
    switch (FRAME_TYPE) {
      case 'BATTLE': return showBattleFrame();
      case 'YOUR_MOVES':
      case 'WORST_CASE':
      case 'WIN': return showTempChart();
      case 'YOUR_TEAM': {
        $(window).resize(() => {
          const members = $('.TM');
          const width = body.width();
          if (width < 320) {
            members.addClass('onePerRow');
            members.css('transform', `scale(${width / 344})`);
          }
          else {
            members.removeClass('onePerRow');
            members.css('transform', `scale(${width / 688})`);
          }
        });
        $(window).resize();
        updateTeam();
      }
    }
  };

  const hide = () => {
    $('#Message').html('Future Sight AI is not running right now</br>Try coming back later');
    $(noBattleEle).show();
    $('#chart, iframe').remove();
  };

  const findBattle = () => {
    if (finding) return;
    finding = true;
    fetch(API_URL + 'assignBattleToWatch', {
      method: 'POST',
      body: JSON.stringify({id: pageID}),
    })
    .then(res => res.json())
    .then(json => {
      finding = false;
      if (json.battleID && !currentBattle.id) {
        currentBattle.id = json.battleID;
        currentBattle.yourTeam = json.yourTeam;
        console.log('Battle', json.battleID, 'found');
        show();
      }
      else if (!hadBattle) {
        hide();
      }
    })
    .catch(e => {
      finding = false;
      console.warn(e);
    });
  };

  const connect = () => {
    const connection = (() => {
      try {
        return new signalR.HubConnectionBuilder()
          .withUrl(API_URL)
          .build();
      }
      catch (e) {
        hide();
      }
    })();

    if (!connection) return;

    connection.onclose(() => {
      setTimeout(() => connect(), 2000);
    });

    connection.on('update', data => {
      if (data.battleID === currentBattle.id) {
        hadBattle = true;
        switch (FRAME_TYPE) {
          case 'WIN': {
            updateWinChart(data);
            break;
          }
          case 'WORST_CASE':
          case 'YOUR_MOVES': {
            updatePredictionChart(data);
            break;
          }
          case 'YOUR_TEAM': {
            updateTeam(data);
            break;
          }
          default: console.log(data);
        }
      }
      else if (!currentBattle.id) findBattle();
    });

    connection.on('startBattle', data => {
      if (!currentBattle.id) findBattle();
    });

    connection.on('endBattle', data => {
      if (data.battleID === currentBattle.id) {
        currentBattle.id = 0;
        currentBattle.yourTeam = {};
        setTimeout(findBattle, 5000);
      }
    });

    connection.start().then(() => {
      if (!currentBattle.id) findBattle();
    }).catch(hide);
  };

  connect();
</script>
</html>
